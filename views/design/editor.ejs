<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>卧室设计编辑器 - 我的卧室</title>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/editor.css">
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.160.0/build/three.module.js"
    }
  }
  </script>
</head>
<body>
  <div class="editor-container">
    <!-- 顶部工具栏 -->
    <div class="editor-toolbar">
      <div class="logo">我的卧室设计师</div>
      <div class="tools">
        <button id="save-design" title="保存设计"><svg width="24" height="24" viewBox="0 0 24 24"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg></button>
        <button id="load-design" title="加载设计"><svg width="24" height="24" viewBox="0 0 24 24"><path d="M3 15v4c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2v-4M17 8l-5-5-5 5M12 3v12"></path></svg></button>
        <div class="separator"></div>
        <button id="undo" title="撤销" disabled><svg width="24" height="24" viewBox="0 0 24 24"><path d="M3 10h10a5 5 0 0 1 5 5 5 5 0 0 1-5 5H8"></path><polyline points="3 10 9 4 3 10 9 16 3 10"></polyline></svg></button>
        <button id="redo" title="重做" disabled><svg width="24" height="24" viewBox="0 0 24 24"><path d="M21 10H11a5 5 0 0 0-5 5 5 5 0 0 0 5 5h5"></path><polyline points="21 10 15 4 21 10 15 16 21 10"></polyline></svg></button>
        <div class="separator"></div>
        <button id="move-mode" class="active" title="移动模式"><svg width="24" height="24" viewBox="0 0 24 24"><path d="M5 9l-3 3 3 3M9 5l3-3 3 3M15 19l-3 3-3-3M19 9l3 3-3 3M3 12h18M12 3v18"></path></svg></button>
        <button id="rotate-mode" title="旋转模式"><svg width="24" height="24" viewBox="0 0 24 24"><path d="M20.38 8.57l-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44z"></path><path d="M10.59 15.41a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83z"></path></svg></button>
        <button id="delete-mode" title="删除模式"><svg width="24" height="24" viewBox="0 0 24 24"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></button>
        <div class="separator"></div>
        <button id="render" title="渲染效果图"><svg width="24" height="24" viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg></button>
      </div>
      <div class="user-controls">
        <button id="help" title="帮助"><svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg></button>
        <button id="settings" title="设置"><svg width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg></button>
      </div>
    </div>
    
    <!-- 主编辑区 -->
    <div class="editor-main">
      <!-- 侧边栏 -->
      <div class="sidebar">
        <!-- 家具库 -->
        <div class="furniture-library">
          <h3>家具库</h3>
          <div class="search-bar">
            <input type="text" id="furniture-search" placeholder="搜索家具...">
            <button id="search-btn"><svg width="18" height="18" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg></button>
          </div>
          <div class="category-tabs">
            <div class="category-tab active" data-category="all">全部</div>
            <div class="category-tab" data-category="bed">床</div>
            <div class="category-tab" data-category="cabinet">柜子</div>
            <div class="category-tab" data-category="table">桌子</div>
            <div class="category-tab" data-category="chair">椅子</div>
            <div class="category-tab" data-category="lamp">灯具</div>
            <div class="category-tab" data-category="decoration">装饰</div>
          </div>
          <div id="furniture-list" class="furniture-list">
            <!-- 家具列表将通过JavaScript动态填充 -->
            <div class="loading">加载中...</div>
          </div>
        </div>
      </div>
      
      <!-- 画布容器 -->
      <div class="canvas-container">
        <canvas id="design-canvas"></canvas>
        
        <!-- 属性面板 -->
        <div id="property-panel" class="property-panel">
          <div class="panel-header">
            <h3>属性设置</h3>
            <button class="close-panel"><svg width="18" height="18" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
          </div>
          <div class="panel-content">
            <div class="property-name">
              <h4>选中对象</h4>
              <div id="selected-name" class="value">未选中</div>
            </div>
            <div class="property-group">
              <h4>位置</h4>
              <div class="property-row">
                <label>X:</label>
                <input type="number" id="position-x" step="0.1">
              </div>
              <div class="property-row">
                <label>Y:</label>
                <input type="number" id="position-y" step="0.1">
              </div>
              <div class="property-row">
                <label>Z:</label>
                <input type="number" id="position-z" step="0.1">
              </div>
            </div>
            <div class="property-group">
              <h4>旋转 (度)</h4>
              <div class="property-row">
                <label>X:</label>
                <input type="number" id="rotation-x">
              </div>
              <div class="property-row">
                <label>Y:</label>
                <input type="number" id="rotation-y">
              </div>
              <div class="property-row">
                <label>Z:</label>
                <input type="number" id="rotation-z">
              </div>
            </div>
            <div class="property-group">
              <h4>缩放</h4>
              <div class="property-row">
                <label>X:</label>
                <input type="number" id="scale-x" step="0.1" min="0.1">
              </div>
              <div class="property-row">
                <label>Y:</label>
                <input type="number" id="scale-y" step="0.1" min="0.1">
              </div>
              <div class="property-row">
                <label>Z:</label>
                <input type="number" id="scale-z" step="0.1" min="0.1">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 保存设计弹窗 -->
  <div id="save-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>保存设计</h2>
        <button class="close-modal"><svg width="18" height="18" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="design-name">设计名称</label>
          <input type="text" id="design-name" placeholder="输入设计名称">
        </div>
        <div class="form-group">
          <label for="design-description">描述 (可选)</label>
          <textarea id="design-description" placeholder="输入设计描述"></textarea>
        </div>
        <div class="form-actions">
          <button id="cancel-save" class="btn-secondary">取消</button>
          <button id="confirm-save" class="btn-primary">保存</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 加载设计弹窗 -->
  <div id="load-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>加载设计</h2>
        <button class="close-modal"><svg width="18" height="18" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
      </div>
      <div class="modal-body">
        <div class="saved-designs">
          <!-- 保存的设计列表将通过JavaScript动态填充 -->
          <div class="loading">加载中...</div>
        </div>
        <div class="form-actions">
          <button id="cancel-load" class="btn-secondary">取消</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 渲染设置弹窗 -->
  <div id="render-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>渲染设置</h2>
        <button class="close-modal"><svg width="18" height="18" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="render-quality">渲染质量</label>
          <select id="render-quality">
            <option value="low">低 (快速渲染)</option>
            <option value="medium" selected>中等</option>
            <option value="high">高 (更多细节)</option>
          </select>
        </div>
        <div class="form-group">
          <label for="render-size">输出大小</label>
          <select id="render-size">
            <option value="1280x720">HD (1280x720)</option>
            <option value="1920x1080" selected>Full HD (1920x1080)</option>
            <option value="3840x2160">4K (3840x2160)</option>
          </select>
        </div>
        <div class="form-actions">
          <button id="cancel-render" class="btn-secondary">取消</button>
          <button id="start-render" class="btn-primary">开始渲染</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 帮助弹窗 -->
  <div id="help-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>使用帮助</h2>
        <button class="close-modal"><svg width="18" height="18" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
      </div>
      <div class="modal-body">
        <h3>快速入门</h3>
        <ol>
          <li>从左侧家具库中选择家具点击添加到场景</li>
          <li>使用工具栏中的移动、旋转工具调整家具位置</li>
          <li>点击家具可以在右侧面板中精确调整属性</li>
          <li>完成设计后点击"保存设计"按钮保存</li>
        </ol>
        <h3>快捷键</h3>
        <ul>
          <li><kbd>Ctrl+Z</kbd> - 撤销</li>
          <li><kbd>Ctrl+Y</kbd> - 重做</li>
          <li><kbd>Del</kbd> - 删除选中的家具</li>
          <li><kbd>鼠标拖动</kbd> - 旋转视角</li>
          <li><kbd>鼠标滚轮</kbd> - 缩放视图</li>
        </ul>
      </div>
    </div>
  </div>
  
  <!-- 加载动画 -->
  <div class="loading-overlay">
    <div class="spinner"></div>
    <div class="loading-text">加载中...</div>
  </div>
  
  <!-- 脚本 -->
  <script type="module" src="/js/editor.js"></script>
</body>
</html> 